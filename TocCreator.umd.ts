(function(a,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(a=typeof globalThis<"u"?globalThis:a||self,e(a.TocCreator={},a.Vue))})(this,function(a,e){"use strict";function T(l,s){let o=0,n=l.length-1;for(;o<=n;){let t=Math.floor((o+n)/2);if(l[t]===s)return t;l[t]>s?n=t-1:o=t+1}return n}function m(l,s){let o=!1,n,t;return function i(...c){if(o){n=c,t=this;return}o=!0,l.apply(this,c),setTimeout(()=>{o=!1,n.length&&(i.apply(t,n),n=[],t={})},s)}}function x(l,s=l){let o=!1,n=0,t=0,i,c;l.onpointerdown=r=>{i=r.pageX,c=r.pageY,o=!0};const d=m(function(r){if(o){let u=r.pageX-i,p=r.pageY-c;s.style.transform=`translate3d(${n+u}px,${t+p}px,0)`}},100);document.onpointermove=d,document.onpointerup=r=>{o&&(n+=r.pageX-i,t+=r.pageY-c,s.style.transform=`translate3d(${n}px,${t}px,0)`),o=!1}}const C={class:"toc remove"},B={class:"dragBar"},k=["id","onClick"],w=e.defineComponent({__name:"TocCreator",props:{container:{default:""},scrollTop:null},setup(l){const s=l,o=e.ref();let n=e.ref(0);s.scrollTop?n.value=s.scrollTop.value:window.addEventListener("scroll",function(){n.value=window.pageYOffset}),e.onMounted(()=>{const i=document.getElementsByClassName("dragBar")[0],c=document.getElementsByClassName("toc")[0];x(i,c),o.value=Array.from(document.querySelectorAll(`${s.container} h2,h3,h4,h5,h6`));const d=o.value.map((p,h)=>p.getBoundingClientRect().top);let r;const u=m(p=>{var _,y;const h=p+document.documentElement.clientHeight/2,f=T(d,h);r!==f&&((_=document.querySelector(`#toc-${r}`))==null||_.classList.toggle("toc-choosen"),(y=document.querySelector(`#toc-${f}`))==null||y.classList.toggle("toc-choosen"),r=f)},100);e.watch(n,u)});const t=e.ref(!1);return(i,c)=>(e.openBlock(),e.createElementBlock("div",C,[e.createElementVNode("button",B,[e.createTextVNode(" = "),e.createElementVNode("button",{onClick:c[0]||(c[0]=d=>t.value=!t.value),class:e.normalizeClass([t.value?"collapse":"expand"])},e.toDisplayString(t.value?"⊼":"⊽"),3)]),e.withDirectives(e.createElementVNode("ul",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.value,(d,r)=>(e.openBlock(),e.createElementBlock("li",{id:`toc-${r}`,class:e.normalizeClass(`item-${d.tagName.charAt(1)}`),onClick:u=>d.scrollIntoView({behavior:"smooth",block:"center"})},e.toDisplayString(d.innerText),11,k))),256))],512),[[e.vShow,!t.value]])]))}}),$="",g=((l,s)=>{const o=l.__vccOpts||l;for(const[n,t]of s)o[n]=t;return o})(w,[["__scopeId","data-v-61373cfc"]]),E={install:l=>{l.component("TocCreator",g)}};a.TocCreator=g,a.default=E,Object.defineProperties(a,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
